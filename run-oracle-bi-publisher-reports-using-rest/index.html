<!-- Re-direct to another URL -->


<!DOCTYPE html>
<html lang="en">


<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZBQEYPJ33T"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ZBQEYPJ33T');
</script>

   
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Run Oracle BI Publisher reports using REST</title>

    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.png">
   <!-- Favicons -->
   <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/apple-touch-icon.png">
   <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon-32x32.png">
   <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon-16x16.png">
   <link rel="manifest" href="/assets/images/site.webmanifest">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <!-- Google Fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700" rel="stylesheet">

    <!-- Bootstrap Modified -->
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- Theme Stylesheet -->
    <link rel="stylesheet" href="/assets/css/theme.css">

    <!-- Jquery on header to make sure everything works, the rest  of the scripts in footer for fast loading -->
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

    <!-- This goes before </head> closing tag, Google Analytics can be placed here --> 
<script defer data-domain="usingprimavera.com" src="https://plausible.io/js/plausible.js"></script>


    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="Run Oracle BI Publisher reports using REST" />
<meta name="author" content="barrie" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to use REST to run Oracle BI Publisher reports, which can be useful for extracting data from your application, such as Oracle Primavera in our case." />
<meta property="og:description" content="How to use REST to run Oracle BI Publisher reports, which can be useful for extracting data from your application, such as Oracle Primavera in our case." />
<link rel="canonical" href="http://localhost:4000/run-oracle-bi-publisher-reports-using-rest/" />
<meta property="og:url" content="http://localhost:4000/run-oracle-bi-publisher-reports-using-rest/" />
<meta property="og:site_name" content="Using Primavera" />
<meta property="og:image" content="http://localhost:4000/assets/images/postman_running_bip_report.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-04-04T20:44:32+01:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://localhost:4000/assets/images/postman_running_bip_report.png" />
<meta property="twitter:title" content="Run Oracle BI Publisher reports using REST" />
<meta name="twitter:site" content="@usingprimavera" />
<meta name="twitter:creator" content="@barrie" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"barrie"},"dateModified":"2022-04-30T09:27:54+01:00","datePublished":"2022-04-04T20:44:32+01:00","description":"How to use REST to run Oracle BI Publisher reports, which can be useful for extracting data from your application, such as Oracle Primavera in our case.","headline":"Run Oracle BI Publisher reports using REST","image":"http://localhost:4000/assets/images/postman_running_bip_report.png","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/run-oracle-bi-publisher-reports-using-rest/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/logo.png"},"name":"barrie"},"url":"http://localhost:4000/run-oracle-bi-publisher-reports-using-rest/"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body class="">

    <!-- Navbar -->
    <nav id="MagicMenu" class="topnav navbar navbar-expand-lg navbar-light bg-white fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/index.html"><strong>Using Primavera</strong></a>
        <button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbarColor02" style="">
            <ul class="navbar-nav mr-auto d-flex align-items-center">
               <!--  Replace menu links here -->

<li class="nav-item">
<a class="nav-link" href="/index.html">Home</a>
</li>
<li class="nav-item">
<a class="nav-link" href="/about.html">About</a>
</li>

            </ul>
            <ul class="navbar-nav ml-auto d-flex align-items-center">
                <script src="/assets/js/lunr.js"></script>

<script>
$(function() {
    $("#lunrsearchresults").on('click', '#btnx', function () {
        $('#lunrsearchresults').hide( 1000 );
        $( "body" ).removeClass( "modal-open" );
    });
});
    

var documents = [{
    "id": 0,
    "url": "http://localhost:4000/404/",
    "title": "",
    "body": " 404 Page not found :(  The requested page could not be found. "
    }, {
    "id": 1,
    "url": "http://localhost:4000/about.html",
    "title": "About",
    "body": "Using Primavera is a blog dedicated to helping Oracle Primavera P6 and Oracle Primavera Unifier users get the best out of these products through producing reports using Oracle BI Publisher.  I started using the predecessor of P6, Primavera P3e, in 2001, and have recently worked on the largest Oracle Primavera P6 and Unifier deployment in the world.  The capability available through BI Publisher has been impressive, and I believe is underused in the Primavera world. My aim is to provide you with all the practical information needed to get the most out of using Oracle BI Publisher with P6 and Unifier.  However, it will be more than just reports. Who is this for?:  New Primavera users who want to know more than just which buttons to press.  The more experienced user who wants better reports using data in both P6 and Unifier.  The Data professional who wants to know how to get data out of P6 and Unifier. About Barrie Callender: My name is Barrie Callender. I never intended to get involved in Project Management, but somehow landed a job supporting Artemis 2000 in November 1987. That was for Metier Management systems where I stayed for 13 years, followed by 5 years at Pinnacle Management Systems inc and a further 10 at what became Ten Six Consulting. In June 2016 I started my own company to see what might happen. I then read Technical Blogging by Antonio Cangiano and wrote the following posts for my good friends at Ten Six Consulting:  How to load Activity Code Values into Primavera P6 from Excel How to create a new prokect in Primavera P6 How long is a Primavera P6 Day, Week, Month or Year Calendars in Oracle Primavera P6 explainedAs I near the end of my career, I want to leave something behind, and who knows, maybe I can ease out of this work rather than abruptly halting it. On a personal note, I am married to my lovely wife Lisa, and we have two children who have turned into fine adults. I enjoy the world of project consulting where I earn my keep. On reflection, I would probably be happiest if I could write software for a living.  I have also got into Family History. Copyright Acknowledgement: I mostly consult for clients who have bought the Oracle Primavera products. Find more about Oracle Primavera products here "
    }, {
    "id": 2,
    "url": "http://localhost:4000/categories.html",
    "title": "Categories",
    "body": "          Categories          {% for category in site. categories %}     {{ category[0] }}:           {% assign pages_list = category[1] %}    {% for post in pages_list %}    {% if post. title != null %}     {% if group == null or group == post. group %}           {% include main-loop-card. html %}     {% endif %}    {% endif %}    {% endfor %}    {% assign pages_list = nil %}    {% assign group = nil %}    {% endfor %}                  {% include sidebar-featured. html %}          "
    }, {
    "id": 3,
    "url": "http://localhost:4000/",
    "title": "Using Primavera",
    "body": "  {% if page. url ==  /  %}            {% assign latest_post = site. posts[0] %}          &lt;div class= topfirstimage  style= background-image: url({% if latest_post. image contains  ://  %}{{ latest_post. image }}{% else %} {{site. baseurl}}/{{ latest_post. image}}{% endif %}); height: 200px;  background-size: cover;  background-repeat: no-repeat; &gt;&lt;/div&gt;           {{ latest_post. title }}  :       {{ latest_post. excerpt | strip_html | strip_newlines | truncate: 136 }}               In         {% for category in latest_post. categories %}        {{ category }},         {% endfor %}                                {{ latest_post. date | date: '%b %d, %Y' }}                            {%- assign second_post = site. posts[1] -%}                        {% if second_post. image %}                         &lt;img class= w-100  src= {% if second_post. image contains  ://  %}{{ second_post. image }}{% else %}{{ second_post. image | absolute_url }}{% endif %}  alt= {{ second_post. title }} &gt;                        {% endif %}                                    {{ second_post. title }}          :                       In             {% for category in second_post. categories %}            {{ category }},             {% endfor %}                                                      {{ second_post. date | date: '%b %d, %Y' }}                                    {%- assign third_post = site. posts[2] -%}                        {% if third_post. image %}                         &lt;img class= w-100  src= {% if third_post. image contains  ://  %}{{ third_post. image }}{% else %}{{site. baseurl}}/{{ third_post. image }}{% endif %}  alt= {{ third_post. title }} &gt;                        {% endif %}                                    {{ third_post. title }}          :                       In             {% for category in third_post. categories %}            {{ category }},             {% endfor %}                                                      {{ third_post. date | date: '%b %d, %Y' }}                                    {%- assign fourth_post = site. posts[3] -%}                        {% if fourth_post. image %}                        &lt;img class= w-100  src= {% if fourth_post. image contains  ://  %}{{ fourth_post. image }}{% else %}{{site. baseurl}}/{{ fourth_post. image }}{% endif %}  alt= {{ fourth_post. title }} &gt;                        {% endif %}                                    {{ fourth_post. title }}          :                       In             {% for category in fourth_post. categories %}            {{ category }},             {% endfor %}                                                      {{ fourth_post. date | date: '%b %d, %Y' }}                                  {% for post in site. posts %} {% if post. tags contains  sticky  %}                    {{post. title}}                  {{ post. excerpt | strip_html | strip_newlines | truncate: 136 }}                 Read More            	             {% endif %}{% endfor %}  {% endif %}                All Stories:         {% for post in paginator. posts %}          {% include main-loop-card. html %}        {% endfor %}                   {% if paginator. total_pages &gt; 1 %}              {% if paginator. previous_page %}        &laquo; Prev       {% else %}        &laquo;       {% endif %}       {% for page in (1. . paginator. total_pages) %}        {% if page == paginator. page %}        {{ page }}        {% elsif page == 1 %}        {{ page }}        {% else %}        {{ page }}        {% endif %}       {% endfor %}       {% if paginator. next_page %}        Next &raquo;       {% else %}        &raquo;       {% endif %}            {% endif %}                     {% include sidebar-featured. html %}      "
    }, {
    "id": 4,
    "url": "http://localhost:4000/privacy-policy.html",
    "title": "Privacy Policy",
    "body": "”{{site. name}}” takes your privacy seriously. To better protect your privacy we provide this privacy policy notice explaining the way your personal information is collected and used. Collection of Routine Information: This website track basic information about their visitors. This information includes, but is not limited to, IP addresses, browser details, timestamps and referring pages. None of this information can personally identify specific visitor to this website. The information is tracked for routine administration and maintenance purposes. Cookies: Where necessary, this website uses cookies to store information about a visitor’s preferences and history in order to better serve the visitor and/or present the visitor with customized content. Advertisement and Other Third Parties: Advertising partners and other third parties may use cookies, scripts and/or web beacons to track visitor activities on this website in order to display advertisements and other useful information. Such tracking is done directly by the third parties through their own servers and is subject to their own privacy policies. This website has no access or control over these cookies, scripts and/or web beacons that may be used by third parties. Learn how to opt out of Google’s cookie usage. Links to Third Party Websites: We have included links on this website for your use and reference. We are not responsible for the privacy policies on these websites. You should be aware that the privacy policies of these websites may differ from our own. Security: The security of your personal information is important to us, but remember that no method of transmission over the Internet, or method of electronic storage, is 100% secure. While we strive to use commercially acceptable means to protect your personal information, we cannot guarantee its absolute security. Changes To This Privacy Policy: This Privacy Policy is effective and will remain in effect except with respect to any changes in its provisions in the future, which will be in effect immediately after being posted on this page. We reserve the right to update or change our Privacy Policy at any time and you should check this Privacy Policy periodically. If we make any material changes to this Privacy Policy, we will notify you either through the email address you have provided us, or by placing a prominent notice on our website. Contact Information: For any questions or concerns regarding the privacy policy, please contact us here. "
    }, {
    "id": 5,
    "url": "http://localhost:4000/tags.html",
    "title": "Tags",
    "body": "          Tags          {% for tag in site. tags %}     {{ tag[0] }}:           {% assign pages_list = tag[1] %}    {% for post in pages_list %}    {% if post. title != null %}     {% if group == null or group == post. group %}           {% include main-loop-card. html %}     {% endif %}    {% endif %}    {% endfor %}    {% assign pages_list = nil %}    {% assign group = nil %}    {% endfor %}                  {% include sidebar-featured. html %}          "
    }, {
    "id": 6,
    "url": "http://localhost:4000/terms-of-use.html",
    "title": "Terms of Use",
    "body": "”{{site. name}}” will put terms of use here. "
    }, {
    "id": 7,
    "url": "http://localhost:4000/robots.txt",
    "title": "",
    "body": "      Sitemap: {{ “sitemap. xml”   absolute_url }}   "
    }, {
    "id": 8,
    "url": "http://localhost:4000/run-oracle-bi-publisher-reports-using-rest/",
    "title": "Run Oracle BI Publisher reports using REST",
    "body": "2022/04/04 - Recently we needed to run a series of Oracle BI Publisher reports to extract data from Oracle Primavera P6 and Oracle Primavera Unifier, and store it in another system. We found the official REST API for Oracle Business Intelligence Publisher to be incomplete in this respect.  We managed to hunt down the missing information, and decided to write a post showing what we did in an effort to help others who may be stuck in the same way we were. This post is intended to get you up and running with using the Oracle BI Publisher REST API.  We start by using the REST API directly from a Web Browser to retrieve information about a report.  Then we’ll do the same thing using Postman to help get started with it, if you have never used it before.  Then we’ll use Postman to run a report to return some data, before running reports that need parameters and how to retrieve the same report in different data formats. We used the free Postman application to find out what to do, and have also used that knowledge to implement the same thing using PowerBI Desktop and the Power Query M formula language. The state of the documentation for the REST API for BI Publisher: REST is an acronym that stands for REpresentational State Transfer and is an architectural style that was first presented in 2000.  We’re not going to go into the depths of what exactly that means, but here are a few resources we have found useful, but please carry on with this article and come back to these and other resources later if you need or want to increase your knowledge:  What is REST REST API Tutorial Representational state transfer - WikipediaWe’ll try and introduce everything you need to know as we go along.  The documentation for the REST API for BI Publication has some essential information, but assumes you know REST and the HTTP Protocol, so it is a good start.  Unfortunately, it lets itself down by some poor examples.  It does tell us where options can be provided, but doesn’t mention what those options are or how to format them. The state of the documentation is a case of close, but not complete. Get a report definition: Retrieving the report definition is the easiest thing to do, and can be done using just a web browser.  We entered http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT into a web browser.  It then asked us for some credentials for BI Publisher and returned the following in the web browser. { ESSJobName :  , ESSPackageName :  , autoRun :true, cacheDocument :true, controledByExtApp :false, dataModelURL : /~weblogic/BIPREST/DATA_MODELS/PARAM_REPORT. xdm , defaultOutputFormat : csv , defaultTemplateId : PARAM_REPORT , diagnostics :false, listOfTemplateFormatsLabelValues :[{ active :true, applyStyleTemplate :true, default :true, listOfTemplateFormatLabelValue :[{ templateFormatLabel : Data , templateFormatValue : xml },{ templateFormatLabel : CSV , templateFormatValue : csv }], templateAvailableLocales :[ en_US ], templateDefaultLocale : en_US , templateID : PARAM_REPORT , templateType : xpt , templateURL : PARAM_REPORT. xpt , viewOnline :true}], onLine :true, openLinkInNewWindow :true, parameterColumns :3, parameterNames :[ p6ScheduleObjectId ], reportDefnTitle :  , reportName : PARAM_REPORT , reportParameterNameValues :[{ UIType : Text , dataType : xsd:integer , defaultValue : 38 , fieldSize : 15 , label : P6 Internal Project Id , multiValuesAllowed :false, name : p6ScheduleObjectId , refreshParamOnChange :false, selectAll :false, templateParam :false, useNullForAll :false}], showControls :true, showReportLinks :true, templateIds :[ PARAM_REPORT ]}It might not look very exciting, but it is a nice easy start, and doing it confirms you can use REST to reach your BI Publisher system. Let’s break that URL down. What’s in a URL?: The first part of the URL is http://ple-2012-bi:9502/xmlpserver which would take us to the BI Publisher application if that was all we entered.  The next part is documented by Oracle in the Get Report Definition as /services/rest/v1/reports/{reportPath}.  This is the REST specific part of the whole URL.  The REST implementation on BI Publisher makes use of URLs in combination with parameters, payloads and different method types to carry out different requests.  They all follow the hostname and port fragment with /xmlpserver/services/rest/v1/reports/.  Anything after this, such as {reportPath} is specific to the request being made. The Oracle documentation for the Get Report Definition request says it uses the Get method, which is the easiest to run by typing it in a browser, just like many other requests we make on a regular basis using our web browsers.  5 of the 14 endpoints in the BI Publisher REST service are Get requests.  It is almost a case of just typing each of them into your web browser to get something back. The last part of this Get Report Definition endpoint is the {reportPath} parameter.  As it’s name suggests it is the path to the report, whose definition we are after, but it doesn’t look like it at first sight.  The path, as seen in BI Publsiher is ~barrie/BIPREST/PARAM_REPORT.  The Report is called PARAM_REPORT and is in the BIPREST folder inside the “My Folders” directory which is my username ~barrie. Parameters can’t contain certain characters that are used in a normal URL.  They have to be encoded by being replaced with something else.  A forward slash can’t be used so it is replaced by %2F, and a space can’t be used so it is replaced by %20.  There are others, but luckily most programming languages have a library that can URL-encode parameters. The documentation places a parameter name between curly braces, and it has to be replaced with a URL encoded version of the value of the parameter.  The 5 Get requests require the {reportPath}, {templateId} parameter or both.  In the report we use here, the {templateId} is the same name as the report. Get these with just your web browser: I can enter any of the five Get requests into my browser to get something back.  Get Report Definition: /services/rest/v1/reports/{reportPath} as http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT Get Report Sample Data: /services/rest/v1/reports/{reportPath}/sampleData which downloads a file if the report has sample data as http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT/sampleData Get Report Template: /services/rest/v1/reports/{reportPath}/templates/{templateId} which downloads a file as http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT/templates/PARAM_REPORT Get Report Template Parameters: /services/rest/v1/reports/{reportPath}/templates/{templateId}/parameters as http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT/templates/PARAM_REPORT/parameters Get XDO Schema: /services/rest/v1/reports/{reportPath}/xdoSchema which downloads a file as http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT/xdoSchemaBI Publisher will ask for your credentials the first time, and so long as you don’t leave it too long, it will let you keep sending Get Requests. The truth is we don’t need to use any of these Get requests to just run a report, but we wanted to show the basics and then build up from there. A little help from Postman: In this part of the post we are going to use the free Postman application to implement the Get Report Definition, and continue using it for the rest of the post.  It is an application that can be used to build and test web services and get to see what is going on.  We’re going to use a small part of it’s capabilities to demonstrate how to use the BI Publisher REST API.  SoapUI is another app with similar capabilities.  We use Postman because we found it easier to find out how to use it than we did with SoapUI. The first thing we did was create a Collection in Postman which is a place to store the requests we will be making.  We gave the Collection a name and then setup Authorisation.  The Collection uses Basic Authorization.  Under the Authorization Tab, we selected Basic Auth from the Type drop-down and then entered our credentials for BI Publisher in the Username and Password text boxes. In addition to setting the Authorization Type, we setup the URL Encoded version of our path.  This is very simple to do with Postman.  We enter the path as we would normally see it, highlight what we have entered and select Encode URI Component from the drop-down.  There is a Decode URI Component to swap it back if we need to. We’re now ready to create a Get Report Definition request in Postman. The GET Request for the Report Definition: Sending a Request is very easy with Postman.  Open a new Tab by clicking on the + button near the top of Postman.  The new tab defaults to a GET request and it is possible to just type the full URL directly into the text box.  The {reportPath} is a URL Encoded path, which is very easy for us to do as our path is ~barrie/BIPREST/PARAM_REPORT. Not all paths are this easy to convert, but Postman provides a helping hand.  We entered the full URL as http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie/BIPREST/PARAM_REPORT.  We then highlighted the part representing the path to the report, clicked the elipses next to the Set as variable that pops up and selected Encode URI Component from the drop-down.  There is also a Decode URI Component to swap it back if needed. Our URL now looks like this: http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT. The Request has to be saved to our Collection, by selecting Save As from the Save button drop-down.  Once this is done we moved to the Authorization Tab of the Request and changed the Type to Basic Auth. We then clicked the Send button and the definition was returned to Postman. We are using hardly any of the functionality of Postman here, clicking around the various tabs will reveal a lot of information about the request being made and the responses returned. Running a simple report: By a simple report we mean one that does not require any parameters.  Running reports makes use of the POST method and we also have to send some information using a Multipart Form. The BI Publisher REST documentation to run a report specifies the format of the url as /services/rest/v1/reports/{reportPath}/run, which just like the Get Report Definition request is what appears after the normal URL for BI Publisher.  The URL request is the same as for the Get Report Definition except it ends with /run. We went to Postman and opened a new tab by clicking on the + button.  We entered the URL by copying the Get report Definition URL into the text box and adding /run to the end of it.  The Run Report request has to be a POST method so we changed it from GET to POST. The Content-Type has to be multipart/form-data. To set that up we went to the Headers tab and entered Content-Type as the Key and multipart/form-data as the Value.  Both of these appeared as values to choose once we started typing. The Run Report request needs to send a ReportRequest as a part in the request which requires it being added to the body of the request.  This is sometimes called the Payload.  There are many attributes that can go in here but we are going to keep it very simple at first, and discuss some of them later. We switch to the body tab where we need to click on the form-data radio button before we can enter the ReportRequest which requires us to add the Key, Value and Content-Type.  Postman doesn’t display the last of these by default so we have to include Content-Type by clicking the elipses on the headings row and ensuring Content Type is selected, then we can enter the required values.  In our case ReportRequest is typed into the Key box, { byPassCache :true} in the Value box and application/json into the Content Type box.  The Value is in Json format so we have to specify the content as application/json. Just as with the Report Definition, the last steps are to save the Request to our collection and set the Authorization, before clicking on the Send button to get the report data.  The screenshot shows the data returned as CSV data. Our simple report defaults to returning data as CSV, but it is also configured to return data as XML.  We can request the report is returned as XML by passing  attributeFormat : xml  as part of the ReportRequest so now the value of the ReportRequest is { byPassCache :true,  attributeFormat : xml }.  This time the data is returned in xml format when the Send button is clicked. There are many options that can be passed, but they aren’t documented in the REST documentation.  They can be found in the SOAP Web Services documentation which is in the Developer’s Guide for Oracle Business Intelligence Publisher.  We found them in the 2. 3. 46 ReportRequest section.  If the report has not been configured to use an option found here, then requesting it won’t make a difference.  As an example, our report is not configured to return a PDF format so setting the attributeFormat to pdf results in an error being returned. Requesting a report with a parameter: The report we have been using just returns some basic information about Activities in the database.  We have now changed the report to require a parameter for the internal P6 Project Id.  The report will now return only the P6 Activities for that specific P6 Project. The parameter is named p_proj_id with a Data Type of Integer and a Parameter Type of Text.  This just means we can send it an integer value and so long as there is a P6 project with a proj_id of the value we send, then a record for each task will be returned.  If there is no project then BI Publisher will return an empty XML stream, that will look like this: &lt;data_ds&gt;&lt;/data_ds&gt;. The parameter is passed as another value in the ReportRequest.  We need to send the value 411 to the p_proj_id parameter, so we need to add  parameterNameValues : {  listOfParamNameValues : [{ name :  p_proj_id , values :  411 }]} into the ReportRequest. It is very difficult to work this out from the BI Publisher REST documentation, which seems to send us round and round in circles.  It is slightly less difficult to get it from the BI Publisher SOAP documentation.  Considering it is something that is very common, we think it needs adding as an example to the Run Report API. The name is the name of the BI Publisher, which in our case is p_proj_id, and the values is the value we wish to set.  To test this out we added the parameterNameValues structure to the end of the existing ReportRequest string, separating it with a comma.  The full string now looks like this: { byPassCache :true,  attributeFormat : xml ,  parameterNameValues : {  listOfParamNameValues : [{ name :  p_proj_id , values :  411 }]}} When we click the Send button in Postman it now returns the tasks for the P6 Project with an internal P6 Project Id of 411. If we want to get the tasks for more than one P6 project, we can call the report for each project, but that seems a little cumbersome.  BI Publisher allows the parameter value to be a set of comma separated values.  We made the change to our report by selecting the option Text field contains comma-separated values and then updated the WHERE statement from WHERE proj_id = :p_proj_id to be WHERE proj_id IN ():p_proj_id). We clicked the Send button in Postman to verify it still returns the tasks for a single project, which it did.  Now we decided to request the tasks for 3 different projects with project_id of 412, 413 &amp; 414.  All we did was replace the parameter value of 411 with 412,413,414 so the full ReportRequest is now set to: { byPassCache :true,  attributeFormat : xml ,  parameterNameValues : {  listOfParamNameValues : [{ name :  p_proj_id , values :  412,413,414 }]}}. We clicked the Send button and it returned the tasks from the project specified. What next?: Anyone who has been struggling with working out how to run a BI Publisher report using the REST API, and then pass a parameter to retrieve data should be able to do that using the information in this post.  There is a lot more to try out and explore, such as passing more than one parameter, or retieving a list of values from BI Publisher and setting one or more of them them as parameters in the ReportRequest. We plan to visit those topics in another post, and also show how we extracted the XML and put it in a database. "
    }];

var idx = lunr(function () {
    this.ref('id')
    this.field('title')
    this.field('body')

    documents.forEach(function (doc) {
        this.add(doc)
    }, this)
});


    
function lunr_search(term) {
    $('#lunrsearchresults').show( 1000 );
    $( "body" ).addClass( "modal-open" );
    
    document.getElementById('lunrsearchresults').innerHTML = '<div id="resultsmodal" class="modal fade show d-block"  tabindex="-1" role="dialog" aria-labelledby="resultsmodal"> <div class="modal-dialog shadow-lg" role="document"> <div class="modal-content"> <div class="modal-header" id="modtit"> <button type="button" class="close" id="btnx" data-dismiss="modal" aria-label="Close"> &times; </button> </div> <div class="modal-body"> <ul class="mb-0"> </ul>    </div> <div class="modal-footer"><button id="btnx" type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Close</button></div></div> </div></div>';
    if(term) {
        document.getElementById('modtit').innerHTML = "<h5 class='modal-title'>Search results for '" + term + "'</h5>" + document.getElementById('modtit').innerHTML;
        //put results on the screen.
        var results = idx.search(term);
        if(results.length>0){
            //console.log(idx.search(term));
            //if results
            for (var i = 0; i < results.length; i++) {
                // more statements
                var ref = results[i]['ref'];
                var url = documents[ref]['url'];
                var title = documents[ref]['title'];
                var body = documents[ref]['body'].substring(0,160)+'...';
                document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "<li class='lunrsearchresult'><a href='" + url + "'><span class='title'>" + title + "</span><br /><small><span class='body'>"+ body +"</span><br /><span class='url'>"+ url +"</span></small></a></li>";
            }
        } else {
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "<li class='lunrsearchresult'>Sorry, no results found. Close & try a different search!</li>";
        }
    }
    return false;
}
</script>
<style>
    .lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}
</style>




<form class="bd-search hidden-sm-down" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
<input type="text" class="form-control text-small"  id="lunrsearch" name="q" value="" placeholder="Type keyword and enter..."> 
</form>
            </ul>
        </div>
    </div>
    </nav>

    <!-- Search Results -->
    <div id="lunrsearchresults">
        <ul class="mb-0"></ul>
    </div>

    <!-- Content -->
    <main role="main" class="site-content">
        
<div class="container">
<div class="jumbotron jumbotron-fluid mb-3 pl-0 pt-0 pb-0 bg-white position-relative">
		<div class="h-100 tofront">
			<div class="row  justify-content-between ">
				<div class=" col-md-6  pr-0 pr-md-4 pt-4 pb-4 align-self-center">
					<p class="text-uppercase font-weight-bold">
                        <span class="catlist">
						
                        </span>
					</p>
					<h1 class="display-4 mb-4 article-headline">Run Oracle BI Publisher reports using REST</h1>
					<div class="d-flex align-items-center">
                        
						<small class="ml-3">  <span><a target="_blank" href="" class="btn btn-outline-success btn-sm btn-round ml-1">Follow</a></span>
                            <span class="text-muted d-block mt-1">Apr 04, 2022 · <span class="reading-time">
  
  
    15 mins read
  
</span>
    </span>
						</small>
					</div>
				</div>
                
				<div class="col-md-6 pr-0 align-self-center">
					<img class="rounded" src="/assets/images/postman_running_bip_report.png" alt="Run Oracle BI Publisher reports using REST">
				</div>
                
			</div>
		</div>
	</div>
</div>





<div class="container-lg pt-4 pb-4">
	<div class="row justify-content-center">
        
        
        <!-- Share -->
		<div class="col-lg-2 pr-4 mb-4 col-md-12">
			<div class="sticky-top sticky-top-offset text-center">
				<div class="text-muted">
					Share this
				</div>
				<div class="share d-inline-block">
					<!-- AddToAny BEGIN -->
					<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
						<a class="a2a_dd" href="https://www.addtoany.com/share"></a>
						<a class="a2a_button_facebook"></a>
						<a class="a2a_button_twitter"></a>
					</div>
					<script async src="https://static.addtoany.com/menu/page.js"></script>
					<!-- AddToAny END -->
				</div>
			</div>
		</div>
        
        
		<div class="col-md-12 col-lg-8">
            
            <!-- Article -->
			<article class="article-post">                
			<p>Recently we needed to run a series of Oracle BI Publisher reports to extract data from Oracle Primavera P6 and Oracle Primavera Unifier, and store it in another system.</p>

<p>We found the official <a href="https://docs.oracle.com/middleware/bi12214/bip/BIPAP/index.html">REST API for Oracle Business Intelligence Publisher</a> to be incomplete in this respect.  We managed to hunt down the missing information, and decided to write a post showing what we did in an effort to help others who may be stuck in the same way we were.</p>

<p>This post is intended to get you up and running with using the Oracle BI Publisher REST API.  We start by using the REST API directly from a Web Browser to retrieve information about a report.  Then we’ll do the same thing using Postman to help get started with it, if you have never used it before.  Then we’ll use Postman to run a report to return some data, before running reports that need parameters and how to retrieve the same report in different data formats.</p>

<p>We used the free <a href="https://www.postman.com/">Postman</a> application to find out what to do, and have also used that knowledge to implement the same thing using <a href="https://www.microsoft.com/en-gb/p/power-bi-desktop/9ntxr16hnw1t?activetab=pivot:overviewtab">PowerBI Desktop</a> and the <a href="https://docs.microsoft.com/en-us/powerquery-m/">Power Query M formula language</a>.</p>

<h2 id="the-state-of-the-documentation-for-the-rest-api-for-bi-publisher">The state of the documentation for the REST API for BI Publisher</h2>
<p><img src="/assets/images/oracle_bip_docs_banner.png" alt="BI Publisher Documentation Banner" class="img-responsive" />
REST is an acronym that stands for <strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer and is an architectural style that was first presented in 2000.  We’re not going to go into the depths of what exactly that means, but here are a few resources we have found useful, but please carry on with this article and come back to these and other resources later if you need or want to increase your knowledge:</p>

<ul>
  <li><a href="https://www.codecademy.com/article/what-is-rest">What is REST</a></li>
  <li><a href="https://restfulapi.net/">REST API Tutorial</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Representational_state_transfer">Representational state transfer - Wikipedia</a></li>
</ul>

<p>We’ll try and introduce everything you need to know as we go along.  The documentation for the REST API for BI Publication has some essential information, but assumes you know REST and the <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP Protocol</a>, so it is a good start.  Unfortunately, it lets itself down by some poor examples.  It does tell us where options can be provided, but doesn’t mention what those options are or how to format them.</p>

<p>The state of the documentation is a case of close, but not complete.</p>

<h2 id="get-a-report-definition">Get a report definition</h2>
<p><img src="/assets/images/get_report_definition_bip_docs.png" alt="Get Report Definition" />
Retrieving the report definition is the easiest thing to do, and can be done using just a web browser.  We entered <code class="language-plaintext highlighter-rouge">http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT</code> into a web browser.  It then asked us for some credentials for BI Publisher and returned the following in the web browser.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="nl">"ESSJobName"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"ESSPackageName"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"autoRun"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"cacheDocument"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"controledByExtApp"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"dataModelURL"</span><span class="p">:</span><span class="s2">"/~weblogic/BIPREST/DATA_MODELS/PARAM_REPORT.xdm"</span><span class="p">,</span><span class="nl">"defaultOutputFormat"</span><span class="p">:</span><span class="s2">"csv"</span><span class="p">,</span><span class="nl">"defaultTemplateId"</span><span class="p">:</span><span class="s2">"PARAM_REPORT"</span><span class="p">,</span><span class="nl">"diagnostics"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"listOfTemplateFormatsLabelValues"</span><span class="p">:[{</span><span class="nl">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"applyStyleTemplate"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"default"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"listOfTemplateFormatLabelValue"</span><span class="p">:[{</span><span class="nl">"templateFormatLabel"</span><span class="p">:</span><span class="s2">"Data"</span><span class="p">,</span><span class="nl">"templateFormatValue"</span><span class="p">:</span><span class="s2">"xml"</span><span class="p">},{</span><span class="nl">"templateFormatLabel"</span><span class="p">:</span><span class="s2">"CSV"</span><span class="p">,</span><span class="nl">"templateFormatValue"</span><span class="p">:</span><span class="s2">"csv"</span><span class="p">}],</span><span class="nl">"templateAvailableLocales"</span><span class="p">:[</span><span class="s2">"en_US"</span><span class="p">],</span><span class="nl">"templateDefaultLocale"</span><span class="p">:</span><span class="s2">"en_US"</span><span class="p">,</span><span class="nl">"templateID"</span><span class="p">:</span><span class="s2">"PARAM_REPORT"</span><span class="p">,</span><span class="nl">"templateType"</span><span class="p">:</span><span class="s2">"xpt"</span><span class="p">,</span><span class="nl">"templateURL"</span><span class="p">:</span><span class="s2">"PARAM_REPORT.xpt"</span><span class="p">,</span><span class="nl">"viewOnline"</span><span class="p">:</span><span class="kc">true</span><span class="p">}],</span><span class="nl">"onLine"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"openLinkInNewWindow"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"parameterColumns"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="nl">"parameterNames"</span><span class="p">:[</span><span class="s2">"p6ScheduleObjectId"</span><span class="p">],</span><span class="nl">"reportDefnTitle"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"reportName"</span><span class="p">:</span><span class="s2">"PARAM_REPORT"</span><span class="p">,</span><span class="nl">"reportParameterNameValues"</span><span class="p">:[{</span><span class="nl">"UIType"</span><span class="p">:</span><span class="s2">"Text"</span><span class="p">,</span><span class="nl">"dataType"</span><span class="p">:</span><span class="s2">"xsd:integer"</span><span class="p">,</span><span class="nl">"defaultValue"</span><span class="p">:</span><span class="s2">"38"</span><span class="p">,</span><span class="nl">"fieldSize"</span><span class="p">:</span><span class="s2">"15"</span><span class="p">,</span><span class="nl">"label"</span><span class="p">:</span><span class="s2">"P6 Internal Project Id"</span><span class="p">,</span><span class="nl">"multiValuesAllowed"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"p6ScheduleObjectId"</span><span class="p">,</span><span class="nl">"refreshParamOnChange"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"selectAll"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"templateParam"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"useNullForAll"</span><span class="p">:</span><span class="kc">false</span><span class="p">}],</span><span class="nl">"showControls"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"showReportLinks"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"templateIds"</span><span class="p">:[</span><span class="s2">"PARAM_REPORT"</span><span class="p">]}</span></code></pre></figure>

<p>It might not look very exciting, but it is a nice easy start, and doing it confirms you can use REST to reach your BI Publisher system.</p>

<p>Let’s break that URL down.</p>

<h3 id="whats-in-a-url">What’s in a URL?</h3>
<p>The first part of the URL is <code class="language-plaintext highlighter-rouge">http://ple-2012-bi:9502/xmlpserver</code> which would take us to the BI Publisher application if that was all we entered.  The next part is documented by Oracle in the <a href="https://docs.oracle.com/middleware/bi12214/bip/BIPAP/op-v1-reports-reportpath-get.html">Get Report Definition</a> as <code class="language-plaintext highlighter-rouge">/services/rest/v1/reports/{reportPath}</code>.  This is the REST specific part of the whole URL.  The REST implementation on BI Publisher makes use of URLs in combination with parameters, payloads and different method types to carry out different requests.  They all follow the hostname and port fragment with <code class="language-plaintext highlighter-rouge">/xmlpserver/services/rest/v1/reports/</code>.  Anything after this, such as <code class="language-plaintext highlighter-rouge">{reportPath}</code> is specific to the request being made.</p>

<p>The Oracle documentation for the Get Report Definition request says it uses the <strong>Get</strong> method, which is the easiest to run by typing it in a browser, just like many other requests we make on a regular basis using our web browsers.  5 of the 14 endpoints in the BI Publisher REST service are Get requests.  It is almost a case of just typing each of them into your web browser to get something back.</p>

<p>The last part of this Get Report Definition endpoint is the <strong>{reportPath}</strong> parameter.  As it’s name suggests it is the path to the report, whose definition we are after, but it doesn’t look like it at first sight.  The path, as seen in BI Publsiher is <code class="language-plaintext highlighter-rouge">~barrie/BIPREST/PARAM_REPORT</code>.  The Report is called <strong>PARAM_REPORT</strong> and is in the <strong>BIPREST</strong> folder inside the “My Folders” directory which is my username <strong>~barrie</strong>.</p>

<p>Parameters can’t contain certain characters that are used in a normal URL.  They have to be encoded by being replaced with something else.  A forward slash can’t be used so it is replaced by <strong>%2F</strong>, and a space can’t be used so it is replaced by <strong>%20</strong>.  There are others, but luckily most programming languages have a library that can URL-encode parameters.</p>

<p>The documentation places a parameter name between curly braces, and it has to be replaced with a URL encoded version of the value of the parameter.  The 5 Get requests require the <strong>{reportPath}</strong>, <strong>{templateId}</strong> parameter or both.  In the report we use here, the <strong>{templateId}</strong> is the same name as the report.</p>

<h3 id="get-these-with-just-your-web-browser">Get these with just your web browser</h3>
<p>I can enter any of the five Get requests into my browser to get something back.</p>

<ul>
  <li>Get Report Definition: /services/rest/v1/reports/{reportPath} as <code class="language-plaintext highlighter-rouge">http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT</code></li>
  <li>Get Report Sample Data: /services/rest/v1/reports/{reportPath}/sampleData which downloads a file if the report has sample data as <code class="language-plaintext highlighter-rouge">http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT/sampleData</code></li>
  <li>Get Report Template: /services/rest/v1/reports/{reportPath}/templates/{templateId} which downloads a file as <code class="language-plaintext highlighter-rouge">http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT/templates/PARAM_REPORT</code></li>
  <li>Get Report Template Parameters: /services/rest/v1/reports/{reportPath}/templates/{templateId}/parameters as <code class="language-plaintext highlighter-rouge">http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT/templates/PARAM_REPORT/parameters</code></li>
  <li>Get XDO Schema: /services/rest/v1/reports/{reportPath}/xdoSchema which downloads a file as <code class="language-plaintext highlighter-rouge">http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT/xdoSchema</code></li>
</ul>

<p>BI Publisher will ask for your credentials the first time, and so long as you don’t leave it too long, it will let you keep sending Get Requests.</p>

<p>The truth is we don’t need to use any of these Get requests to just run a report, but we wanted to show the basics and then build up from there.</p>

<h2 id="a-little-help-from-postman">A little help from Postman</h2>
<p>In this part of the post we are going to use the free <a href="https://www.postman.com/">Postman</a> application to implement the Get Report Definition, and continue using it for the rest of the post.  It is an application that can be used to build and test web services and get to see what is going on.  We’re going to use a small part of it’s capabilities to demonstrate how to use the BI Publisher REST API.  <a href="https://www.soapui.org/">SoapUI</a> is another app with similar capabilities.  We use Postman because we found it easier to find out how to use it than we did with SoapUI.</p>

<p>The first thing we did was <a href="https://learning.postman.com/docs/getting-started/creating-the-first-collection/">create a Collection</a> in Postman which is a place to store the requests we will be making.  We gave the Collection a name and then setup Authorisation.  The Collection uses Basic Authorization.  Under the <strong>Authorization</strong> Tab, we selected <strong>Basic Auth</strong> from the <strong>Type</strong> drop-down and then entered our credentials for BI Publisher in the <strong>Username</strong> and <strong>Password</strong> text boxes.</p>

<p><img src="/assets/images/postman_create_collection_authorisation.png" alt="Create Postman collection using Basic Authorization" />
In addition to setting the Authorization Type, we setup the URL Encoded version of our path.  This is very simple to do with Postman.  We enter the path as we would normally see it, highlight what we have entered and select <strong>Encode URI Component</strong> from the drop-down.  There is a <strong>Decode URI Component</strong> to swap it back if we need to.</p>

<p>We’re now ready to create a Get Report Definition request in Postman.</p>

<h2 id="the-get-request-for-the-report-definition">The GET Request for the Report Definition</h2>

<p><a href="https://learning.postman.com/docs/getting-started/sending-the-first-request/">Sending a Request</a> is very easy with Postman.  Open a new Tab by clicking on the + button near the top of Postman.  The new tab defaults to a <strong>GET</strong> request and it is possible to just type the full URL directly into the text box.  The <strong>{reportPath}</strong> is a URL Encoded path, which is very easy for us to do as our path is <code class="language-plaintext highlighter-rouge">~barrie/BIPREST/PARAM_REPORT</code>. Not all paths are this easy to convert, but Postman provides a helping hand.  We entered the full URL as <code class="language-plaintext highlighter-rouge">http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie/BIPREST/PARAM_REPORT</code>.  We then highlighted the part representing the path to the report, clicked the elipses next to the <strong>Set as variable</strong> that pops up and selected <strong>Encode URI Component</strong> from the drop-down.  There is also a <strong>Decode URI Component</strong> to swap it back if needed.</p>

<p>Our URL now looks like this: <code class="language-plaintext highlighter-rouge">http://ple-2012-bi:9502/xmlpserver/services/rest/v1/reports/~barrie%2FBIPREST%2FPARAM_REPORT</code>.</p>

<p>The Request has to be saved to our Collection, by selecting <strong>Save As</strong> from the Save button drop-down.  Once this is done we moved to the <code class="language-plaintext highlighter-rouge">Authorization</code> Tab of the Request and changed the Type to <strong>Basic Auth</strong>.</p>

<p>We then clicked the <strong>Send</strong> button and the definition was returned to Postman.</p>

<p>We are using hardly any of the functionality of Postman here, clicking around the various tabs will reveal a lot of information about the request being made and the responses returned.</p>

<h2 id="running-a-simple-report">Running a simple report</h2>
<p><img src="/assets/images/bip_run_report_rest_endpoint.png" alt="BI Publisher REST Documentation banner for Run Report" class="img-responsive" />
By a simple report we mean one that does not require any parameters.  Running reports makes use of the <strong>POST</strong> method and we also have to send some information using a Multipart Form.</p>

<p>The BI Publisher REST documentation to <a href="https://docs.oracle.com/middleware/bi12214/bip/BIPAP/op-v1-reports-reportpath-run-post.html">run a report</a> specifies the format of the url as <code class="language-plaintext highlighter-rouge">/services/rest/v1/reports/{reportPath}/run</code>, which just like the Get Report Definition request is what appears after the normal URL for BI Publisher.  The URL request is the same as for the Get Report Definition except it ends with <code class="language-plaintext highlighter-rouge">/run</code>.</p>

<p>We went to Postman and opened a new tab by clicking on the + button.  We entered the URL by copying the Get report Definition URL into the text box and adding <code class="language-plaintext highlighter-rouge">/run</code> to the end of it.  The Run Report request has to be a <strong>POST</strong> method so we changed it from <strong>GET</strong> to <strong>POST</strong>.
The <strong>Content-Type</strong> has to be <strong>multipart/form-data</strong>. To set that up we went to the <strong>Headers</strong> tab and entered <strong>Content-Type</strong> as the <strong>Key</strong> and <strong>multipart/form-data</strong> as the <strong>Value</strong>.  Both of these appeared as values to choose once we started typing.<br />
<img src="/assets/images/postman_bip_run_headers.png" alt="Setting the Headers in Postman" /></p>

<p>The Run Report request needs to send a <code class="language-plaintext highlighter-rouge">ReportRequest</code> as a part in the request which requires it being added to the body of the request.  This is sometimes called the Payload.  There are many attributes that can go in here but we are going to keep it very simple at first, and discuss some of them later.</p>

<p>We switch to the <strong>body</strong> tab where we need to click on the <strong>form-data</strong> radio button before we can enter the ReportRequest which requires us to add the <strong>Key</strong>, <strong>Value</strong> and <strong>Content-Type</strong>.  Postman doesn’t display the last of these by default so we have to include Content-Type by clicking the elipses on the headings row and ensuring <strong>Content Type</strong> is selected, then we can enter the required values.  In our case <code class="language-plaintext highlighter-rouge">ReportRequest</code> is typed into the <strong>Key</strong> box, <code class="language-plaintext highlighter-rouge">{"byPassCache":true}</code> in the <strong>Value</strong> box and <code class="language-plaintext highlighter-rouge">application/json</code> into the <strong>Content Type</strong> box.  The Value is in Json format so we have to specify the content as application/json.
<img src="/assets/images/postman_bip_simple_reportrequest.png" alt="Setting the values in the body for the multipart form" /></p>

<p>Just as with the Report Definition, the last steps are to save the Request to our collection and set the Authorization, before clicking on the <strong>Send</strong> button to get the report data.  The screenshot shows the data returned as CSV data.
<img src="/assets/images/postman_bip_simple_csv_data.png" alt="Contents of data returned as CSV" /></p>

<p>Our simple report defaults to returning data as CSV, but it is also configured to return data as XML.  We can request the report is returned as XML by passing <code class="language-plaintext highlighter-rouge">"attributeFormat":"xml"</code> as part of the <code class="language-plaintext highlighter-rouge">ReportRequest</code> so now the value of the ReportRequest is <code class="language-plaintext highlighter-rouge">{"byPassCache":true, "attributeFormat":"xml"}</code>.  This time the data is returned in xml format when the Send button is clicked.
<img src="/assets/images/postman_bip_simple_xml_data.png" alt="Contents of data returned as XML" /></p>

<p>There are many options that can be passed, but they aren’t documented in the REST documentation.  They can be found in the SOAP Web Services documentation which is in the <a href="https://docs.oracle.com/middleware/12213/bip/BIPDV/index.html">Developer’s Guide for Oracle Business Intelligence Publisher</a>.  We found them in the <a href="https://docs.oracle.com/middleware/12213/bip/BIPDV/datatypes.htm#BIPDV209">2.3.46 ReportRequest</a> section.  If the report has not been configured to use an option found here, then requesting it won’t make a difference.  As an example, our report is not configured to return a PDF format so setting the attributeFormat to pdf results in an error being returned.</p>

<h2 id="requesting-a-report-with-a-parameter">Requesting a report with a parameter</h2>
<p>The report we have been using just returns some basic information about Activities in the database.  We have now changed the report to require a parameter for the internal P6 Project Id.  The report will now return only the P6 Activities for that specific P6 Project.</p>

<p>The parameter is named <code class="language-plaintext highlighter-rouge">p_proj_id</code> with a <strong>Data Type</strong> of <strong>Integer</strong> and a <strong>Parameter Type</strong> of <strong>Text</strong>.  This just means we can send it an integer value and so long as there is a P6 project with a proj_id of the value we send, then a record for each task will be returned.  If there is no project then BI Publisher will return an empty XML stream, that will look like this: <code class="language-plaintext highlighter-rouge">&lt;data_ds&gt;&lt;/data_ds&gt;</code>.</p>

<p>The parameter is passed as another value in the <code class="language-plaintext highlighter-rouge">ReportRequest</code>.  We need to send the value <strong>411</strong> to the <strong>p_proj_id</strong> parameter, so we need to add <code class="language-plaintext highlighter-rouge">"parameterNameValues": { "listOfParamNameValues": [{"name": "p_proj_id","values": "411"}]}</code> into the ReportRequest.</p>

<p>It is very difficult to work this out from the BI Publisher REST documentation, which seems to send us round and round in circles.  It is slightly less difficult to get it from the BI Publisher SOAP documentation.  Considering it is something that is very common, we think it needs adding as an example to the Run Report API.</p>

<p>The <code class="language-plaintext highlighter-rouge">name</code> is the name of the BI Publisher, which in our case is <code class="language-plaintext highlighter-rouge">p_proj_id</code>, and the <code class="language-plaintext highlighter-rouge">values</code> is the value we wish to set.  To test this out we added the parameterNameValues structure to the end of the existing <strong>ReportRequest</strong> string, separating it with a comma.  The full string now looks like this: <code class="language-plaintext highlighter-rouge">{"byPassCache":true, "attributeFormat":"xml", "parameterNameValues": { "listOfParamNameValues": [{"name": "p_proj_id","values": "411"}]}}</code></p>

<p>When we click the <strong>Send</strong> button in Postman it now returns the tasks for the P6 Project with an internal P6 Project Id of 411.</p>

<p>If we want to get the tasks for more than one P6 project, we can call the report for each project, but that seems a little cumbersome.  BI Publisher allows the parameter value to be a set of comma separated values.  We made the change to our report by selecting the option <code class="language-plaintext highlighter-rouge">Text field contains comma-separated values</code> and then updated the WHERE statement from <code class="language-plaintext highlighter-rouge">WHERE proj_id = :p_proj_id</code> to be <code class="language-plaintext highlighter-rouge">WHERE proj_id IN ():p_proj_id)</code>.</p>

<p>We clicked the <strong>Send</strong> button in Postman to verify it still returns the tasks for a single project, which it did.  Now we decided to request the tasks for 3 different projects with project_id of 412, 413 &amp; 414.  All we did was replace the parameter value of <strong>411</strong> with <strong>412,413,414</strong> so the full <strong>ReportRequest</strong> is now set to: <code class="language-plaintext highlighter-rouge">{"byPassCache":true, "attributeFormat":"xml", "parameterNameValues": { "listOfParamNameValues": [{"name": "p_proj_id","values": "412,413,414"}]}}</code>.</p>

<p>We clicked the <strong>Send</strong> button and it returned the tasks from the project specified.</p>

<h2 id="what-next">What next?</h2>
<p>Anyone who has been struggling with working out how to run a BI Publisher report using the REST API, and then pass a parameter to retrieve data should be able to do that using the information in this post.  There is a lot more to try out and explore, such as passing more than one parameter, or retieving a list of values from BI Publisher and setting one or more of them them as parameters in the <strong>ReportRequest</strong>.</p>

<p>We plan to visit those topics in another post, and also show how we extracted the XML and put it in a database.</p>
                
			</article>
			
			<!-- Tags -->
			<div class="mb-4">
				<span class="taglist">
				
				</span>
			</div>
 
            <!-- TinyLetter Subscribe Form -->

<div class="border p-5 bg-lightblue">
    <div class="row justify-content-between">
        <div class="col-md-6 mb-2 mb-md-0">
            <h5 class="font-weight-bold">Get Newsletter Updates</h5>
            Subscribe to our newsletter to hear what we have been writing about.
        </div>
        <div class="col-md-6">
            <div class="row">
                <form action=" https://tinyletter.com/UsingPrimavera" method="post" name="mc-embedded-subscribe-form" class="wj-contact-form validate w-100" target="popupwindow" novalidate>
                    <div class="mc-field-group">
                        <input type="email" placeholder="Enter e-mail address" name="email" class="required email form-control w-100" id="tlemail" autocomplete="on" required>
                        <button type="submit" value="Subscribe" name="subscribe" class="heart btn btn-success btn-block w-100 mt-2">Subscribe</button>
                        <input type="hidden" value="1" name="embed"/>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

            
            
             <!-- Author Box -->
                				
				<div class="row mt-5">
					<div class="col-md-2 align-self-center">
                          
					</div>
					<div class="col-md-10">		
                        <h5 class="font-weight-bold">Written by  </h5>
											
					</div>
				</div>				
                
            
            <!-- Comments -->
            
                <!--  Don't edit anything here. Set your disqus id in _config.yml -->

<div id="comments" class="mt-5">
    <div id="hyvor-talk-view"></div>
<script type="text/javascript">
    var HYVOR_TALK_WEBSITE = 3311; // DO NOT CHANGE THIS
    var HYVOR_TALK_CONFIG = {
        url: 'http://localhost:4000/run-oracle-bi-publisher-reports-using-rest/',
        id: '/run-oracle-bi-publisher-reports-using-rest'
    };
</script>
<script async type="text/javascript" src="//talk.hyvor.com/web-api/embed"></script>
</div>
            
            
		</div>
        
        
	</div>
</div>


<!-- Aletbar Prev/Next -->
<div class="alertbar">
    <div class="container">
        <div class="row prevnextlinks small font-weight-bold">
          
          
        </div>
    </div>
</div>

    </main>


    <!-- Scripts: popper, bootstrap, theme, lunr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

    <script src="/assets/js/theme.js"></script>


    <!-- Footer -->
    <footer class="bg-white border-top p-3 text-muted small">
        <div class="container">
        <div class="row align-items-center justify-content-between">
            <div>
                <span class="navbar-brand mr-2 mb-0"><strong>Mundana</strong></span>
                <span>Copyright © <script>document.write(new Date().getFullYear())</script>.</span>

                <!--  Github Repo Star Btn-->
                <a class="text-dark ml-1" target="_blank" href="https://github.com/wowthemesnet/mundana-theme-jekyll"><i class="fab fa-github"></i> Fork on Github</a>

            </div>
            <div>
                Made with <a target="_blank" class="text-dark font-weight-bold" href="https://www.wowthemes.net/mundana-jekyll-theme/"> Mundana Jekyll Theme </a> by <a class="text-dark" target="_blank" href="https://www.wowthemes.net">WowThemes</a>.
            </div>
        </div>
        </div>
    </footer>

    <!-- All this area goes before </body> closing tag --> 


</body>

</html>

